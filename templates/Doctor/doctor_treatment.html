{% extends "Doctor/base.html" %}

{% block title %}Enter/Update Treatment{% endblock %}

{% block content %}

<div class="container mt-5">
    <h2>Enter/Update Treatment</h2>

    <form action="{{ url_for('doctor.doctor_treatment', appointment_id=appointment.appointment_id) }}" method="POST">

        <!-- Appointment info (readonly) -->
        <div class="mb-3">
            <label class="form-label">Patient Name</label>
            <input type="text" class="form-control" value="{{ appointment.patient.name }}" readonly>
        </div>

        <div class="mb-3">
            <label class="form-label">Doctor Name</label>
            <input type="text" class="form-control" value="{{ appointment.doctor.name }}" readonly>
        </div>

        <div class="mb-3">
            <label class="form-label">Appointment Date & Time</label>
            <input type="text" class="form-control" value="{{ appointment.datetime.strftime('%d %b %Y, %I:%M %p') }}" readonly>
        </div>

        <!-- Diagnosis -->
        <div class="mb-3">
            <label for="diagnosis" class="form-label">Diagnosis</label>
            <textarea class="form-control" id="diagnosis" name="diagnosis" rows="6" required
                      placeholder="Enter diagnosis">{{ treatment.diagnosis if treatment else '' }}</textarea>
        </div>

        <!-- Prescription -->
        <div class="mb-3">
            <label for="prescription" class="form-label">Prescription</label>
            <textarea class="form-control" id="prescription" name="prescription" rows="6" required
                      placeholder="Enter prescription">{{ treatment.prescription if treatment else '' }}</textarea>
        </div>

        <!-- Tests -->
        <div class="mb-3">
            <label for="tests" class="form-label">Tests</label>
            <textarea class="form-control" id="tests" name="tests" rows="3"
                      placeholder="Optional tests">{{ treatment.tests if treatment else '' }}</textarea>
        </div>

        <!-- Notes -->
        <div class="mb-3">
            <label for="notes" class="form-label">Notes</label>
            <textarea class="form-control" id="notes" name="notes" rows="3"
                      placeholder="Optional notes">{{ treatment.notes if treatment else '' }}</textarea>
        </div>

        <!-- Submit & Back -->
        <button type="submit" class="btn btn-primary">Save Treatment</button>
        <a href="{{ url_for('doctor.doctor_dashboard') }}" class="btn btn-secondary ms-2">Back</a>

    </form>
</div>

{% endblock %}
